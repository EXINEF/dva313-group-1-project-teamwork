{% extends 'core/base-template.html' %}

{% block content %}


<div class="container">
    <h1>Fleet Manager Home Page</h1>
    <h4><a href="{% url 'add-vehicle' %}">Add a new Vehicle</a></h4>
    <h3>My Vehicles</h3>
    
    <table class="table table-dark table-striped">
    <thead>
        <tr>
        <th scope="col">ID</th>
        <th scope="col">Model</th>
        <th scope="col">Sensor Left Front</th>
        <th scope="col">Sensor Left Back</th>
        <th scope="col">Sensor Right Front</th>
        <th scope="col">Sensor Right Back</th>
        <th scope="col">Update</th>
        <th scope="col">Delete</th>
        </tr>
    </thead>
    <tbody>
        {% for vehicle in vehicles %}
            <tr>
            <th scope="row"><a href="{% url 'vehicle' vehicle.id%}">{{vehicle.id}}</a></th>
            <td>{{vehicle.model}}</td>

            {% for tire in vehicle.tires.all %}
                {% if tire is None %}
                    <td>MISSING TIRE</td>
                {% elif tire.sensor is None %}
                    <td>MISSING SENSOR</td>
                {% else %}
                    <td>{{tire.sensor.status}}</td>
                {% endif %}                
            {% endfor %}
            <td><a href="{% url 'update-vehicle' vehicle.id %}">Update</a></td>
            <td><a href="{% url 'delete-vehicle' vehicle.id %}">Delete</a></td>
            
            </tr>
        {% endfor %}
        
    </tbody>
    </table>
    
</div>




{% endblock content %}




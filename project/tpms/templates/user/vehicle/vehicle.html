{% extends 'core/base-template.html' %}

{% block content %}


<div class="container">
    <style>
        #map{
            height: 400px;
            width: 50%;
            float: right;
            margin-bottom: 2em;
            margin-left: 2em;
        }
        a{
            color: white;
        }
    </style>

    <h1>{{vehicle.id}} Information Page</h1>

    <div style="text-align: right;" class="">
        <a class ="btn btn-dark" href="{% url 'edit-vehicle' vehicle.id %}">Edit</a>
        <a class="btn btn-dark" href="{% url 'delete-vehicle' vehicle.id %}">Delete</a>
    </div>
    <br>
    <div id="map" style="text-align: right;width: 50%;"></div>

    <div>
            <h4>Company: {{vehicle.company}}</h4>
            <h4>Model: {{vehicle.model}}</h4>
            <h4>Consumed Fuel: {{vehicle.consumed_fuel}}</h4>
            <h4>Ambient Temperature: {{vehicle.ambient_temperature}}</h4>
            <h4>Machine Hours Empty: {{vehicle.machine_hours_empty}}</h4>
            <h4>Machine Hours Loaded: {{vehicle.machine_hours_loaded}}</h4>
            <h4>Distance Driven Empty: {{vehicle.distance_driven_empty}}</h4>
            <h4>Distance Driven Loaded: {{vehicle.distance_driven_loaded}}</h4>
            <h4>Payload Empty: {{vehicle.payload_empty}}</h4>
            <h4>Payload Loaded: {{vehicle.payload_loaded}}</h4>
    </div>

<div class="container">
    <br>
    <h3>Vehicle's Tires</h3>
    
    <table class="table table-dark table-striped">
    <thead>
        
        <tr>
        <th scope="col">POSITION</th>
        <th scope="col">Tire ID</th>
        <th scope="col">Sensor ID</th>
        <th scope="col">TEMPERATURE</th>
        <th scope="col">PRESSURE</th>
        <th scope="col">remaining life</th>
        <th scope="col">baseline pressure</th>
        <th scope="col">fill material</th>
        </tr>

    </thead>
    <tbody>
        
        {% include "user/vehicle/tire-row.html" with tire=vehicle.tire_left_front pos='Front Left' %}
        {% include "user/vehicle/tire-row.html" with tire=vehicle.tire_left_rear pos='Rear Left' %}
        {% include "user/vehicle/tire-row.html" with tire=vehicle.tire_right_front pos='Front Right' %}
        {% include "user/vehicle/tire-row.html" with tire=vehicle.tire_right_rear pos='Rear Right' %}
    </tbody>    
    </table>
    </div>
</div>

    <script>
            function initMap(){
              // the settings for the map, its the second argument
              
              var snailTrailCoords = [];
              {% for location in locations  %}

              snailTrailCoords.push({lat:{{location.latitude}}, lng:{{location.longitude}} })
              
              {% endfor %}
              var cent = new google.maps.LatLng(snailTrailCoords[snailTrailCoords.length-1]);
              var options = {
                  zoom:16,
                  center:cent
              }
              
              //{lat:59.6186, lng: 16.5404},
              //{lat:59.60, lng: 16.53}
              
              var map = new google.maps.Map(document.getElementById('map'),options);

              
              //add marker for the last SnailTrailCoordinate
              addMarker(snailTrailCoords[snailTrailCoords.length-1].lat,snailTrailCoords[snailTrailCoords.length-1].lng);

              var snailTrail = new google.maps.Polyline({
                path: snailTrailCoords,
                geodesic: true,
                strokeColor: "#FF0000",
                strokeOpacity: 1.0,
                strokeWeight: 2,
              });

              snailTrail.setMap(map);
              

              function addMarker(lat,long) {
              var lat = lat;
              var long = long;
              var latlong = new google.maps.LatLng(lat,long);

            
            var marker = new google.maps.Marker({
              position: latlong,
              map:map
            });
        }

            }
            

    </script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBV2H0qKkBVZNpOeoVnmmn8h-vC3pOY1Wk&callback=initMap">
    </script>

</div>




{% endblock content %}



